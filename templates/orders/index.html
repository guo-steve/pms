{% extends "base.html" %}

{% block content %}
<div class="box">
    <div class="box-body">
        <table id="order-list" class="table table-hover">
            <thead>
                <tr>
                    <th data-data="id">Id</th>
                    <th data-data="name">Name</th>
                    <th data-data="order_number">Order Number</th>
                    <th data-data="quantity">Quantity</th>
                    <th data-data="customer">Customer</th>
                    <th data-data="country">Country</th>
                    <th data-data="date">Date</th>
                    <th data-data="uri">Actions</th>
                </tr>
            </thead>
            <tbody>

            </tbody>
        </table>
    </div>
</div>
{% endblock %}

{% block js_local %}
<script type="text/javascript">
    $(function(){
        $('#order-list').DataTable({
            "autoWidth": false,
            "ajax": {
                "url": "/orders/ajax",
                "type": "POST",
                "contentType": "application/json",
                "headers": {
                    "X-CSRFToken": "{{ csrf_token }}"
                },
            },
            "columnDefs": [
                {
                    "targets": [-2],
                    "render": function(data, type, row) {
                        return (new Date(data)).toLocaleString();
                    }
                },
                {
                    "targets": [-1],
                    "render": function(data, type, row) {
                        var html = '<a href="' + row.uri + '">Detail</a>';
                        html += ' | <a href="' + row.uri + 'data_batches">Data Batches</a>';
                        return html;
                    }
                }
            ]
        });
    });
</script>
{% endblock %}
